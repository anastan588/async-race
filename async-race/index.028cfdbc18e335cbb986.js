/*! For license information please see index.028cfdbc18e335cbb986.js.LICENSE.txt */
(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&!e;)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p;const n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.body=document.querySelector("body"),this.mainContainer=document.createElement("div"),this.header=document.createElement("header"),this.h1=document.createElement("h1"),this.main=document.createElement("main"),this.footer=document.createElement("footer"),this.pFooter=document.createElement("p"),this.githubImage=document.createElement("img"),this.rsschoolImage=document.createElement("img"),this.githubLink=document.createElement("a"),this.rsschoolLink=document.createElement("a"),this.windowForWin=document.createElement("div"),this.windowForWinTitle=document.createElement("p"),this.windowForWinButtonOK=document.createElement("div")}var e,n;return e=t,(n=[{key:"makeMainHtmlField",value:function(){this.mainContainer.classList.add("main_container"),this.header.classList.add("header"),this.h1.classList.add("title"),this.h1.innerHTML="Async Race",this.main.classList.add("main"),this.footer.classList.add("footer"),this.pFooter.classList.add("footer_text"),this.pFooter.innerHTML="2023",this.githubLink.classList.add("github_link"),this.githubLink.href="https://github.com/anastan588",this.githubLink.target="blank",this.githubImage.classList.add("github_image"),this.githubImage.src="./assets/icons/github.svg",this.rsschoolLink.classList.add("rsschool_link"),this.rsschoolLink.href="https://rs.school/js/",this.rsschoolLink.target="blank",this.rsschoolImage.classList.add("rsschool_image"),this.rsschoolImage.src="./assets/icons/rs_school.svg",this.body.append(this.mainContainer),this.mainContainer.append(this.header),this.mainContainer.append(this.main),this.mainContainer.append(this.footer),this.header.append(this.h1),this.footer.append(this.githubLink),this.githubLink.append(this.githubImage),this.footer.append(this.pFooter),this.footer.append(this.rsschoolLink),this.rsschoolLink.append(this.rsschoolImage)}},{key:"makeWinWindow",value:function(t,e){this.windowForWin.classList.add("window_win"),this.windowForWinTitle.classList.add("window_win_title"),this.windowForWinTitle.innerHTML="Winner is ".concat(t[0].name," (").concat(e,")"),this.windowForWinButtonOK.classList.add("window_win_ok"),this.windowForWinButtonOK.innerHTML="OK",this.windowForWin.append(this.windowForWinTitle),this.windowForWin.append(this.windowForWinButtonOK),document.querySelector(".main").append(this.windowForWin)}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}const u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,t);var e,r,n,u,s=(n=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(u){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this)).buttonsContainer=document.createElement("div"),t.buttonGarage=document.createElement("button"),t.buttonWinners=document.createElement("button"),t}return e=l,(r=[{key:"makeButtonsBetweenPages",value:function(){this.buttonsContainer.classList.add("buttons_container_pages"),this.buttonGarage.classList.add("button_garage"),this.buttonGarage.innerHTML="Garage",this.buttonGarage.disabled=!0,this.buttonWinners.classList.add("button_winners"),this.buttonWinners.innerHTML="Winners",this.buttonsContainer.append(this.buttonGarage),this.buttonsContainer.append(this.buttonWinners)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(n);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}const f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createAndChangeCarContainer=document.createElement("div"),this.createBlock=document.createElement("div"),this.updateBlock=document.createElement("div"),this.inputCreateName=document.createElement("input"),this.inputUpdateName=document.createElement("input"),this.inputCreateColor=document.createElement("input"),this.inputUpdateColor=document.createElement("input"),this.createButton=document.createElement("button"),this.updateButton=document.createElement("button")}var e,r;return e=t,(r=[{key:"makeCreateAndChangeCarField",value:function(){this.createAndChangeCarContainer.classList.add("create_change_container"),this.createBlock.classList.add("create_block"),this.makeCreateBlock(),this.createAndChangeCarContainer.append(this.createBlock),this.updateBlock.classList.add("update_block"),this.makeUpdateBlock(),this.createAndChangeCarContainer.append(this.updateBlock)}},{key:"makeCreateBlock",value:function(){this.inputCreateName.classList.add("create_input_name"),this.inputCreateName.type="text",this.inputCreateName.placeholder="Enter name of new snail",this.inputCreateColor.classList.add("create_input_color"),this.inputCreateColor.type="color",this.createButton.classList.add("create_button"),this.createButton.innerHTML="Create snail",""!==this.inputCreateName.value&&void 0!==this.inputCreateName.value||(this.createButton.disabled=!0),this.createBlock.append(this.inputCreateName),this.createBlock.append(this.inputCreateColor),this.createBlock.append(this.createButton)}},{key:"makeUpdateBlock",value:function(){this.inputUpdateName.classList.add("update_input_name"),this.inputUpdateName.type="text",this.inputUpdateName.placeholder="Enter new name of snail",this.inputUpdateName.disabled=!0,this.inputUpdateColor.classList.add("update_input_color"),this.inputUpdateColor.type="color",this.updateButton.classList.add("update_button"),this.updateButton.innerHTML="Update snail",""!==this.inputUpdateName.value&&void 0!==this.inputUpdateName.value||(this.updateButton.disabled=!0),this.updateBlock.append(this.inputUpdateName),this.updateBlock.append(this.inputUpdateColor),this.updateBlock.append(this.updateButton)}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameControlContainer=document.createElement("div"),this.raceButton=document.createElement("button"),this.resetButton=document.createElement("button"),this.generateCarsButton=document.createElement("button")}var e,r;return e=t,(r=[{key:"makeGameControlContainer",value:function(){this.gameControlContainer.classList.add("game_control_container"),this.raceButton.classList.add("race_button"),this.raceButton.innerHTML="Race",this.resetButton.classList.add("reset_button"),this.resetButton.innerHTML="Reset",this.resetButton.disabled=!0,this.generateCarsButton.classList.add("generate_cars_button"),this.generateCarsButton.innerHTML="Generate snails",this.gameControlContainer.append(this.raceButton),this.gameControlContainer.append(this.resetButton),this.gameControlContainer.append(this.generateCarsButton)}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),m=function(t){return'<svg id="SVGRoot" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" width="40"\n    ><path d="m48 2c-2.1973 0-4 1.8027-4 4 0 2.0499 1.5699 3.7548 3.5645 3.9746l1.3066 9.0391c-1.9261 1.0036-3.4491 2.6814-4.248 4.7207 2.1425 3.5912 3.377 7.7849 3.377 12.266.000003.55229-.44771 1-1 1-.55229.000003-1-.44771-1-1 0-12.138-9.8616-22-22-22s-22 9.8616-22 22 9.8616 22 22 22c9.6814-.01055 15.192-8.4009 15-15 0-8.2961-6.7039-15-15-15-4.4301 0-8 3.5699-8 8s3.5699 8 8 8c2.2151 0 4.2074-.89491 5.6562-2.3438.39051-.39042 1.0236-.39042 1.4141 0 .39042.39051.39042 1.0236 0 1.4141-1.8085 1.8085-4.3148 2.9297-7.0703 2.9297-5.511 0-10-4.489-10-10s4.489-10 10-10c9.377 0 17 7.623 17 17 .14986 9.2069-7.5873 17.052-17 17-6.8745.0358-12.19-2.8129-15.957-6.0859-.54768.13965-1.0752.2903-1.5625.45898-1.2506.43288-2.2958.9501-3.0918 1.6016-.79602.65146-1.3887 1.5138-1.3887 2.5254s.70298 1.8701 1.5508 2.3223c.8478.4522 1.8893.68645 3.125.85156 2.4714.33022 5.7337.32617 9.3242.32617h31c8.2724 0 15-6.7276 15-15v-20c0-3.4621-1.9728-6.4721-4.8496-7.9766l1.293-9.0488c1.9909-.22332 3.5566-1.9274 3.5566-3.9746 0-2.1973-1.8027-4-4-4s-4 1.8027-4 4c0 1.6538 1.0208 3.0831 2.4629 3.6895l-1.2285 8.6035c-.71601-.18427-1.4621-.29297-2.2344-.29297-.76398 0-1.5044.10058-2.2129.28125l-1.2422-8.5938c1.4382-.60811 2.4551-2.0365 2.4551-3.6875 0-2.1973-1.8027-4-4-4z" fill-rule="evenodd" style="fill:'.concat(t,';"></path></svg>')};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new C(o||[]);return n(a,"_invoke",{value:T(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};u(m,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(B([])));g&&g!==e&&r.call(g,i)&&(m=g);var w=p.prototype=d.prototype=Object.create(m);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==v(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function T(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function B(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,n(w,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=B,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:B(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function b(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}const w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.numberOfCars=e,this.carGarage=[],this.pageLimit=n,this.lastIdOfShownCars=r,t.pageNumber=o}var e,r,n,o;return e=t,r=[{key:"receiveCarsFromServer",value:(n=y().mark((function e(){var r,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new URL("http://127.0.0.1:3000/garage")).searchParams.set("_page","".concat(t.pageNumber)),r.searchParams.set("_limit","".concat(this.pageLimit)),e.next=5,fetch(r,{method:"GET"}).then((function(e){if(!e.ok)throw new Error("Error of receiving data");return t.numberOfCars=Number(e.headers.get("X-Total-Count")),e.json()}));case 5:n=e.sent,this.carGarage=n,document.querySelector(".cars_block").innerHTML="",this.fillCarsContainerTitles(),this.fillCarsBlock(this.carGarage.length);case 11:case"end":return e.stop()}}),e,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){b(i,r,o,a,c,"next",t)}function c(t){b(i,r,o,a,c,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"fillCarsContainerTitles",value:function(){document.querySelector(".cars_amount_in_garage").innerHTML="Garage (".concat(t.numberOfCars,")")}},{key:"fillCarsBlock",value:function(t){for(var e=0;e<t;e+=1)this.createCarItem(e)}},{key:"createCarItem",value:function(t){var e=document.querySelector(".cars_block");if(e.children.length<7){var r=document.createElement("div");r.setAttribute("id","".concat(this.carGarage[t].id)),r.classList.add("car_item"),this.fillCarTools(r,t),this.fillCar(r,t),e.append(r)}}},{key:"fillCarTools",value:function(t,e){var r=document.createElement("div");r.classList.add("car_tools");var n=document.createElement("button");n.classList.add("select_button"),n.setAttribute("id","".concat(this.carGarage[e].id)),n.innerHTML="Select";var o=document.createElement("button");o.innerHTML="Remove",o.classList.add("remove_button"),o.setAttribute("id","".concat(this.carGarage[e].id));var i=document.createElement("p");i.classList.add("car_title"),i.innerHTML="".concat(this.carGarage[e].name),i.setAttribute("id","".concat(this.carGarage[e].id)),r.append(n),r.append(o),r.append(i),t.append(r)}},{key:"fillCar",value:function(t,e){var r=document.createElement("div");r.classList.add("car");var n=document.createElement("div");n.classList.add("car_control");var o=document.createElement("button");o.classList.add("start_button"),o.innerHTML="A",o.setAttribute("id","".concat(this.carGarage[e].id));var i=document.createElement("button");i.classList.add("stop_button"),i.setAttribute("id","".concat(this.carGarage[e].id)),i.innerHTML="B",i.disabled=!0,n.append(o),n.append(i),r.append(n);var a=document.createElement("div");a.classList.add("car_image_container");var c=document.createElement("div");c.classList.add("car_image"),c.setAttribute("id","".concat(this.carGarage[e].id));var u=m(this.carGarage[e].color);c.innerHTML=u,a.append(c);var s=document.createElement("img");s.classList.add("flag_image"),s.src="./assets/icons/flag.png",a.append(s),r.append(a),t.append(r)}}],r&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}const T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.carsContainer=document.createElement("div"),this.carsAmountTitle=document.createElement("h1"),this.carsPageTitle=document.createElement("h2"),this.carsBlock=document.createElement("div"),this.panginationButtonsBlockCars=document.createElement("div"),this.prevButtonCars=document.createElement("button"),this.nextButtonCars=document.createElement("button")}var e,r;return e=t,(r=[{key:"makeCommonContainerForCars",value:function(){this.carsContainer.classList.add("cars_container"),this.carsAmountTitle.classList.add("cars_amount_in_garage"),this.carsAmountTitle.innerHTML="Garage()",this.carsContainer.append(this.carsAmountTitle),this.carsPageTitle.classList.add("page_number"),this.carsPageTitle.innerHTML="Page #".concat(w.pageNumber),this.carsContainer.append(this.carsPageTitle),this.carsBlock.classList.add("cars_block"),this.carsContainer.append(this.carsBlock),this.panginationButtonsBlockCars.classList.add("pangination_buttons_cars"),this.carsContainer.append(this.panginationButtonsBlockCars),this.prevButtonCars.classList.add("prev_button_cars"),this.prevButtonCars.innerHTML="Previous",1===w.pageNumber&&(this.prevButtonCars.disabled=!0),this.nextButtonCars.classList.add("next_button_cars"),this.nextButtonCars.innerHTML="Next",this.panginationButtonsBlockCars.append(this.prevButtonCars),this.panginationButtonsBlockCars.append(this.nextButtonCars)}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(n);if(o){var r=C(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).commonContainerGarage=document.createElement("div"),t.createAndChangeCarField=new f,t.gameControlBlock=new p,t.carsCommonContainer=new T,t.panginationButtonsBlockWinners=document.createElement("div"),t.prevButtonWinners=document.createElement("div"),t.nextButtonWinners=document.createElement("div"),t}return e=a,(r=[{key:"makeCommonContainerGarage",value:function(){this.commonContainerGarage.classList.add("garage_container"),this.createAndChangeCarField.makeCreateAndChangeCarField(),this.commonContainerGarage.append(this.createAndChangeCarField.createAndChangeCarContainer),this.gameControlBlock.makeGameControlContainer(),this.commonContainerGarage.append(this.gameControlBlock.gameControlContainer),this.carsCommonContainer.makeCommonContainerForCars(),this.commonContainerGarage.append(this.carsCommonContainer.carsContainer)}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(n);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}const j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.winnersTable=document.createElement("div"),this.winnersItem=document.createElement("div"),this.tableTitleNumber=document.createElement("div"),this.tableTitleCar=document.createElement("div"),this.tableTitleName=document.createElement("div"),this.tableTitleWins=document.createElement("div"),this.tableTitleTime=document.createElement("div"),this.winnersTableContainer=document.createElement("div")}var e,r;return e=t,(r=[{key:"makeWinnersTable",value:function(){this.winnersTable.classList.add("winners_table"),this.winnersItem.classList.add("winners_item"),this.winnersItem.classList.add("winners_table_title"),this.tableTitleNumber.classList.add("title_number"),this.tableTitleNumber.classList.add("item_part"),this.tableTitleNumber.innerHTML="â„–",this.winnersItem.append(this.tableTitleNumber),this.tableTitleCar.classList.add("title_car"),this.tableTitleCar.classList.add("item_part"),this.tableTitleCar.innerHTML="Snail",this.winnersItem.append(this.tableTitleCar),this.tableTitleName.classList.add("title_name"),this.tableTitleName.classList.add("item_part"),this.tableTitleName.innerHTML="Name",this.winnersItem.append(this.tableTitleName),this.tableTitleWins.classList.add("title_wins"),this.tableTitleWins.classList.add("item_part"),this.tableTitleWins.innerHTML="Wins",this.winnersItem.append(this.tableTitleWins),this.tableTitleTime.classList.add("title_time"),this.tableTitleTime.classList.add("item_part"),this.tableTitleTime.innerHTML="Best time(s)",this.winnersItem.append(this.tableTitleTime),this.winnersTable.append(this.winnersItem),this.winnersTableContainer.classList.add("winners_table_container"),this.winnersTable.append(this.winnersTableContainer)}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===O(o)?o:String(o)),n)}var o}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}const A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(n);if(o){var r=N(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).commonContainerWinners=document.createElement("div"),t.winnersAmountTitle=document.createElement("h1"),t.winnersPageTitle=document.createElement("h2"),t.panginationButtonsBlockWinners=document.createElement("div"),t.prevButtonWinners=document.createElement("button"),t.nextButtonWinners=document.createElement("button"),t.winnersTable=new j,t}return e=a,(r=[{key:"makeCommonContainerGarage",value:function(){this.commonContainerWinners.classList.add("winners_container"),this.commonContainerWinners.classList.add("display_none"),this.winnersAmountTitle.classList.add("winners_amount_in_garage"),this.winnersAmountTitle.innerHTML="Winners(0)",this.commonContainerWinners.append(this.winnersAmountTitle),this.winnersPageTitle.classList.add("page_number_winners"),this.winnersPageTitle.innerHTML="Page #1",this.commonContainerWinners.append(this.winnersPageTitle),this.winnersTable.makeWinnersTable(),this.commonContainerWinners.append(this.winnersTable.winnersTable),this.panginationButtonsBlockWinners.classList.add("pangination_buttons_winners"),this.commonContainerWinners.append(this.panginationButtonsBlockWinners),this.prevButtonWinners.classList.add("prev_button_winners"),this.prevButtonWinners.innerHTML="Previous",this.prevButtonWinners.disabled=!0,this.nextButtonWinners.classList.add("next_button_winners"),this.nextButtonWinners.innerHTML="Next",this.panginationButtonsBlockWinners.append(this.prevButtonWinners),this.panginationButtonsBlockWinners.append(this.nextButtonWinners)}}])&&G(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(n);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function R(){R=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:L(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(m=y);var b=p.prototype=d.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==F(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function q(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){q(i,n,o,a,c,"next",t)}function c(t){q(i,n,o,a,c,"throw",t)}a(void 0)}))}}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===F(o)?o:String(o)),n)}var o}const H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.pageNumber=1,this.limitWinnerForpage=10,this.carsWinners=[],t.sort="id",t.order="ASC",this.winnerTableItem=1,this.winnerCarObject=[]}var e,r,n,o,i,a,c,u;return e=t,r=[{key:"getWinnerFromServer",value:(u=I(R().mark((function t(e){var r,n,o,i,a,c;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URL("http://127.0.0.1:3000/winners/".concat(e.id)),t.next=3,fetch(r,{method:"GET"}).then((function(t){return t.ok||404===t.status&&console.log("Car is never win"),t.json()})).catch((function(t){if("NOT FOUND"===t.name)throw new Error("Car is never win")}));case 3:n=t.sent,void 0===(o=n).id?this.createWinner(e):(i=e.time,a=o.time,c=e,a<i&&(c.time=o.time),this.updateWinner(o,c));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"createWinner",value:(c=I(R().mark((function e(r){var n,o,i=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("http://127.0.0.1:3000/winners"),o=JSON.stringify(r),e.next=4,fetch(n,{method:"POST",body:o,headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error of sending data");var r=t.sort,n=t.order;i.receiveAllWinnersFromServer(r,n)}));case 4:case"end":return e.stop()}}),e)}))),function(t){return c.apply(this,arguments)})},{key:"removeWinner",value:(a=I(R().mark((function e(r){var n,o=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("http://127.0.0.1:3000/winners/".concat(r)),e.next=3,fetch(n,{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Error of sending data");var r=t.sort,n=t.order,i=document.querySelector(".race_button"),a=document.querySelector(".reset_button");i.disabled=!1,a.disabled=!0,o.receiveAllWinnersFromServer(r,n)}));case 3:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)})},{key:"updateWinner",value:(i=I(R().mark((function e(r,n){var o,i,a,c,u=this;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new URL("http://127.0.0.1:3000/winners/".concat(r.id)),(i=r).wins+=1,a={wins:i.wins,time:n.time},c=JSON.stringify(a),e.next=7,fetch(o,{method:"PUT",body:c,headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error of sending data");var r=t.sort,n=t.order;u.receiveAllWinnersFromServer(r,n)}));case 7:case"end":return e.stop()}}),e)}))),function(t,e){return i.apply(this,arguments)})},{key:"receiveAllWinnersFromServer",value:(o=I(R().mark((function e(r,n){var o,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new URL("http://127.0.0.1:3000/winners?_page=".concat(t.pageNumber,"&_limit=").concat(this.limitWinnerForpage,"&_sort=").concat(r,"&_order=").concat(n)),e.next=3,fetch(o,{method:"GET"}).then((function(e){if(!e.ok)throw new Error("Error of receiving data");return t.numberOfWinners=Number(e.headers.get("X-Total-Count")),e.json()}));case 3:i=e.sent,this.carsWinners=i,t.globalWinners=this.carsWinners,this.fillTableWinners();case 7:case"end":return e.stop()}}),e,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"fillTableWinners",value:function(){var e=this;document.querySelector(".winners_amount_in_garage").innerHTML="Winners (".concat(t.numberOfWinners,")");var r=document.querySelector(".winners_table_container");r.innerHTML="";for(var n=function(t){var n=e.carsWinners[t].id,o=e.receiveWinnerCarFromGarageServer(n),i=document.createElement("div");i.classList.add("winner_table_item"),o.then((function(){e.fillTableWinnerItem(i,e.winnerCarObject,t),r.append(i),e.winnerCarObject=[]}))},o=0;o<this.carsWinners.length;o+=1)n(o);this.winnerTableItem=1}},{key:"receiveWinnerCarFromGarageServer",value:(n=I(R().mark((function t(e){var r,n;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new URL("http://127.0.0.1:3000/garage")).searchParams.set("id","".concat(e)),t.next=4,fetch(r,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Error of receiving data");return t.json()}));case 4:return n=t.sent,this.winnerCarObject=n,t.abrupt("return",this.winnerCarObject);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"fillTableWinnerItem",value:function(t,e,r){var n=document.createElement("div");n.classList.add("winner_table_item_block"),n.innerHTML="".concat(this.winnerTableItem),this.winnerTableItem+=1;var o=document.createElement("div");o.classList.add("winner_table_item_block"),o.classList.add("winner_image"),o.innerHTML=m(e[0].color);var i=document.createElement("div");i.classList.add("winner_table_item_block"),i.innerHTML=e[0].name;var a=document.createElement("div");a.classList.add("winner_table_item_block"),a.innerHTML="".concat(this.carsWinners[r].wins);var c=document.createElement("div");c.classList.add("winner_table_item_block"),c.innerHTML="".concat(this.carsWinners[r].time),t.append(n),t.append(o),t.append(i),t.append(a),t.append(c)}},{key:"addListenerToWinTableButtonSortByWinsNumber",value:function(){var e=this;document.querySelector(".title_wins").addEventListener("click",(function(){t.sort="wins","ASC"===t.order?t.order="DESC":t.order="ASC",e.receiveAllWinnersFromServer(t.sort,t.order),t.sort="id"}))}},{key:"addListenerToWinTableButtonSortByTime",value:function(){var e=this;document.querySelector(".title_time").addEventListener("click",(function(){t.sort="time","ASC"===t.order?t.order="DESC":t.order="ASC",e.receiveAllWinnersFromServer(t.sort,t.order),t.sort="id"}))}}],r&&M(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:L(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(m=y);var b=p.prototype=d.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==U(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function X(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){X(i,n,o,a,c,"next",t)}function c(t){X(i,n,o,a,c,"throw",t)}a(void 0)}))}}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===U(o)?o:String(o)),n)}var o}const K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateCarObject=[],t.ID=e,t.Status="started",this.createAndChangeCarsField=new f,this.carsBlock=new w,this.controller=new AbortController,this.signal=this.controller.signal,this.winnersTableGame=new H,t.singleRace="single"}var e,r,n,o,i,a,c;return e=t,r=[{key:"addListenerToSelectButton",value:function(){var e=this;document.querySelectorAll(".select_button").forEach((function(r){r.addEventListener("click",(function(r){var n=r.target;document.querySelector(".update_button").disabled=!1;var o=Number(n.getAttribute("id"));t.ID=o,e.receiveSelectCarDatafromServer(o)}))}))}},{key:"receiveSelectCarDatafromServer",value:(c=Y(D().mark((function t(e){var r,n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new URL("http://127.0.0.1:3000/garage")).searchParams.set("id","".concat(e)),t.next=4,fetch(r,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Error of receiving data");return t.json()}));case 4:n=t.sent,this.updateCarObject=n,this.addSelectCarToUpdateForm();case 7:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"addSelectCarToUpdateForm",value:function(){var t=document.querySelector(".update_input_name"),e=document.querySelector(".update_input_color");t.disabled=!1,t.value=this.updateCarObject[0].name,e.value=this.updateCarObject[0].color}},{key:"addListenerToRemoveButton",value:function(){var e=this;document.querySelectorAll(".remove_button").forEach((function(r){r.addEventListener("click",(function(r){var n=r.target;t.ID=Number(n.getAttribute("id")),e.removeSelectCarDatafromServer()}))}))}},{key:"removeSelectCarDatafromServer",value:(a=Y(D().mark((function e(){var r,n,o,i,a=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("http://127.0.0.1:3000/garage/".concat(t.ID)),e.next=3,fetch(r,{method:"DELETE"}).then((function(t){if(!t.ok)throw new Error("Error of receiving data")}));case 3:for(this.removeCarFromCarsBLock(),this.carsBlock.receiveCarsFromServer(),setTimeout((function(){a.addListenerToRemoveButton(),a.addListenerToSelectButton(),a.addListenerToStartButton(),a.addListenerToStopButton()}),500),n=document.querySelector(".race_button"),o=document.querySelector(".reset_button"),n.disabled=!1,o.disabled=!0,i=0;i<H.globalWinners.length;i+=1)H.globalWinners[i].id===t.ID&&this.winnersTableGame.removeWinner(t.ID);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"removeCarFromCarsBLock",value:function(){document.querySelector(".cars_amount_in_garage").innerHTML="Garage (".concat(w.numberOfCars-1,")")}},{key:"addListenerToStartButton",value:function(){var e=this;document.querySelectorAll(".start_button").forEach((function(r){r.addEventListener("click",(function(r){var n=r.target;n.disabled=!0,n.nextElementSibling.disabled=!1,t.ID=Number(n.getAttribute("id")),t.Status="started";var o=t.ID,i=t.Status;t.singleRace="single",e.receivePermissionToStartCar(o,i)}))}))}},{key:"addListenerToStopButton",value:function(){var e=this;document.querySelectorAll(".stop_button").forEach((function(r){r.addEventListener("click",(function(r){var n=r.target;n.disabled=!0,n.previousElementSibling.disabled=!1,t.ID=Number(n.getAttribute("id")),t.Status="stopped";var o=t.ID,i=t.Status;e.receivePermissionToStopCar(o,i)}))}))}},{key:"receivePermissionToStartCar",value:(i=Y(D().mark((function e(r,n){var o,i,a,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new URL("http://127.0.0.1:3000/engine")).searchParams.set("id","".concat(r)),o.searchParams.set("status","".concat(n)),e.next=5,fetch(o,{method:"PATCH"}).then((function(t){if(!t.ok)throw new Error("Error of sending data");return t.json()}));case 5:return i=e.sent,a=i,c=Number(a.distance)/Number(a.velocity),"single"===t.singleRace&&this.moveCar(c,r),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"receivePermissionToDriveCar",value:(o=Y(D().mark((function t(e,r){var n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new URL("http://127.0.0.1:3000/engine")).searchParams.set("id","".concat(r)),n.searchParams.set("status","drive"),t.next=5,fetch(n,{method:"PATCH"}).then((function(t){if(!t.ok&&(e.pause(),500===t.status))throw new Error("Car is broken");return t.json()})).catch((function(t){"AbortError"===t.name&&console.log("AbortError: Fetch request aborted"),"Error"===t.name&&console.log("Car is broken")}));case 5:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"moveCar",value:function(e,r){for(var n=document.querySelectorAll(".car_image_container"),o=document.querySelectorAll(".car_image"),i=0;i<o.length;i+=1)if(Number(o[i].getAttribute("id"))===t.ID){var a=n[i].clientWidth,c=a-.14*a,u=o[i].animate([{transform:"translateX(0)"},{transform:"translateX(".concat(c,"px)")}],{duration:e});u.id=o[i].getAttribute("id"),o[i].style.transform="translateX(".concat(c,"px)"),this.receivePermissionToDriveCar(u,r)}}},{key:"receivePermissionToStopCar",value:(n=Y(D().mark((function t(e,r){var n,o,i;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new URL("http://127.0.0.1:3000/engine")).searchParams.set("id","".concat(e)),n.searchParams.set("status","".concat(r)),t.next=5,fetch(n,{method:"PATCH"}).then((function(t){if(!t.ok)throw new Error("Error of sending data");return t.json()}));case 5:for(o=document.querySelectorAll(".car_image"),i=0;i<o.length;i+=1)Number(o[i].getAttribute("id"))===e&&(o[i].getAnimations().map((function(t){return t.cancel()})),o[i].style.transform="translateX(0px)");case 7:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})}],r&&z(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function V(){V=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:L(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(m=y);var b=p.prototype=d.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==J(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Q(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Q(i,n,o,a,c,"next",t)}function c(t){Q(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===J(o)?o:String(o)),n)}var o}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}const rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(u,t);var e,r,n,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=et(i);if(a){var r=et(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).carsBlock=new w,t.carsBlockGame=new K,t}return e=u,r=[{key:"addListenerToCreateButton",value:function(){var t=this;document.querySelector(".create_button").addEventListener("click",(function(){t.addNewCar(),setTimeout((function(){t.carsBlockGame.addListenerToRemoveButton(),t.carsBlockGame.addListenerToSelectButton(),t.carsBlockGame.addListenerToStartButton(),t.carsBlockGame.addListenerToStopButton()}),1e3)}))}},{key:"addNewCar",value:function(){var t=document.querySelector(".create_input_name"),e=document.querySelector(".create_input_color");if(0!==t.value.length){var r={name:t.value.trim(),color:e.value};this.sendNewCarToServer(r),t.value="",e.value="#000000"}}},{key:"sendNewCarToServer",value:(o=$(V().mark((function t(e){var r,n;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URL("http://127.0.0.1:3000/garage"),n=JSON.stringify(e),t.next=4,fetch(r,{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Error of sending data")}));case 4:this.carsBlock.receiveCarsFromServer();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"addListenerToUpdateButton",value:function(){var t=this;document.querySelector(".update_button").addEventListener("click",(function(){t.updateCar()}))}},{key:"updateCar",value:function(){var t=document.querySelector(".update_input_name"),e=document.querySelector(".update_input_color");if(0!==t.value.length){var r=t.value.trim(),n=e.value,o={name:r,color:n};this.updateCarDataInCarsBlock(r,n),this.sendUpdateCarToServer(o),t.value="",t.disabled=!0,e.value="#000000"}}},{key:"updateCarDataInCarsBlock",value:function(t,e){for(var r=document.querySelector(".cars_block"),n=0;n<r.children.length;n+=1)if(Number(r.children[n].getAttribute("id"))===K.ID){r.children[n].children[0].children[2].innerHTML=t;var o=m(e);r.children[n].children[1].children[1].children[0].innerHTML=o}}},{key:"sendUpdateCarToServer",value:(n=$(V().mark((function t(e){var r,n;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URL("http://127.0.0.1:3000/garage/".concat(K.ID)),n=JSON.stringify(e),t.next=4,fetch(r,{method:"PUT",body:n,headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Error of sending data")}));case 4:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"addListenerToCreateInputName",value:function(){var t=document.querySelector(".create_input_name");t.addEventListener("input",(function(){var e=document.querySelector(".create_button");""!==t.value&&void 0!==t.value?e.disabled=!1:e.disabled=!0}))}}],r&&Z(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(f);function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===nt(o)?o:String(o)),n)}var o}const it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.carsBlock=new w,this.createAndChangeCarGame=new rt,this.carsBlockGame=new K}var e,r;return e=t,(r=[{key:"addListenerToNextButton",value:function(){var t=this,e=document.querySelector(".next_button_cars");e.addEventListener("click",(function(r){r.preventDefault(),w.pageNumber+=1,document.querySelector(".cars_block").innerHTML="",t.carsBlock.receiveCarsFromServer(),setTimeout((function(){t.carsBlockGame.addListenerToSelectButton(),t.carsBlockGame.addListenerToRemoveButton(),t.carsBlockGame.addListenerToStartButton(),t.carsBlockGame.addListenerToStopButton()}),1e3),document.querySelector(".page_number").innerHTML="Page #".concat(w.pageNumber);var n=document.querySelector(".prev_button_cars");w.pageNumber>1&&(n.disabled=!1),setTimeout((function(){7*w.pageNumber>=w.numberOfCars&&(e.disabled=!0)}),100)}))}},{key:"addListenerToPreviousButton",value:function(){var t=this,e=document.querySelector(".prev_button_cars");e.addEventListener("click",(function(){w.pageNumber-=1,document.querySelector(".cars_block").innerHTML="",t.carsBlock.receiveCarsFromServer(),setTimeout((function(){t.carsBlockGame.addListenerToSelectButton(),t.carsBlockGame.addListenerToRemoveButton(),t.carsBlockGame.addListenerToStartButton(),t.carsBlockGame.addListenerToStopButton()}),1e3),document.querySelector(".page_number").innerHTML="Page #".concat(w.pageNumber);var r=document.querySelector(".next_button_cars");1===w.pageNumber&&(e.disabled=!0),setTimeout((function(){(7*w.pageNumber<w.numberOfCars||1===w.pageNumber)&&(r.disabled=!1)}),100)}))}}])&&ot(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),at={Toyota:["Corolla","Prius","RAV 4","4Runner","Aqua","Alphard","Avensis","Camry","C-HR","Fortuner"],Honda:["Accord","Civic","Crosstour","Clarity","CR-V","Fit","Jazz","NSX","S660","Vezel"],BMW:["X1","X2","X3","X4","X5","X6","X7","M3","M5","M6"],Mercedes:["AMG GT Roadster","AMG GT II","CLA","CLS","EQC","EQB","EQS","GLA","ML","GL"],Jaguar:["F-Pace","XE","XF","XJ VI","F-Type","E-Type","I-Pace","XK","X-Type","S-Type"],Subaru:["BRZ","Forester","Impreza","Legacy","Levorg","Outback","Pleo","Impreza WRX","Impreza WRX STI","Exiga"],Porsche:["Carrera GT","911","912","914","918","924","928","944","968","Boxter"],"Alfa Romeo":["Guilia","Mito","Stelvio","Giulietta","Tonale","156","166","2600 Berlina","4C","8C Spider"],Audi:["A1","A2","A3","A4","A5","A6","A7","A8","R8","TT"],Chevrolet:["Aveo","Bolt","Camaro","Captiva","Cobalt","Corvette","Cruze","Equinox","Lacetti","Malibu"]};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(){ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:L(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(m=y);var b=p.prototype=d.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ct(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function L(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function st(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,c,"next",t)}function c(t){st(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===ct(o)?o:String(o)),n)}var o}const dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createAndChangeCarGame=new rt,this.carsBlock=new w,this.carsBlockGame=new K,t.winnerTableGame=new H,this.carForRaceArray=[],t.mainField=new n,t.winnerId=0,t.winnerTime="",t.arrayWithAnimations=[]}var e,r,o,i,a,c;return e=t,r=[{key:"addListenerToGenerateButton",value:function(){var t=this;document.querySelector(".generate_cars_button").addEventListener("click",(function(){t.generateRandomCar(),setTimeout((function(){t.carsBlockGame.addListenerToSelectButton(),t.carsBlockGame.addListenerToRemoveButton(),t.carsBlockGame.addListenerToStartButton(),t.carsBlockGame.addListenerToStopButton()}),4500)}))}},{key:"generateRandomCar",value:function(){for(var t=Object.keys(at).sort((function(){return Math.random()-.5})),e=Object.keys(at),r=0;r<t.length;r+=1)for(var n=0;n<e.length;n+=1)if(e[n]===t[r])for(var o=at[e[n]].sort((function(){return Math.random()-.5})),i=0;i<o.length;i+=1){for(var a="".concat(t[r],"  ").concat(o[i]),c=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],u="#",s=0;s<6;s+=1)u+=c[Math.floor(Math.random()*c.length)];var l={name:a,color:u};this.createAndChangeCarGame.sendNewCarToServer(l)}}},{key:"addListenerToRaceButton",value:function(){var t=this,e=document.querySelector(".race_button");e.addEventListener("click",(function(){t.receiveCarsFromServerParticipatingInRace(),e.disabled=!0}))}},{key:"addListenerToResetButton",value:function(){var t=this,e=document.querySelector(".reset_button"),r=document.querySelector(".race_button");e.addEventListener("click",(function(){e.disabled=!0,r.disabled=!1,t.receivePremissionToStopRace()}))}},{key:"receivePremissionToStopRace",value:(c=lt(ut().mark((function t(){var e=this;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Promise.all(this.carForRaceArray.map((function(t){return e.carsBlockGame.receivePermissionToStopCar(t.id,"stopped")}))).then((function(){return e.carsBlockGame.controller.abort()}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"receiveCarsFromServerParticipatingInRace",value:(a=lt(ut().mark((function t(){var e,r,n,o,i;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new URL("http://127.0.0.1:3000/garage")).searchParams.set("_page","".concat(w.pageNumber)),e.searchParams.set("_limit","".concat(this.carsBlock.pageLimit)),t.next=5,fetch(e,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Error of receiving data");return t.json()}));case 5:for(r=t.sent,n=r,this.carForRaceArray=n,o=[],i=0;i<n.length;i+=1)o.push(n[i].id);this.startRace(n,o);case 11:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"startRace",value:function(t,e){var r=this;this.makeButtonsDisabledWhileRaceInProgress(),K.singleRace="plural";var n=Promise.all(t.map((function(t){return r.carsBlockGame.receivePermissionToStartCar(t.id,"started")}))),o=[];n.then((function(t){o=t.map((function(t){var e=t.distance,r=t.velocity;return Number(e)/Number(r)})),r.moveCarsRace(e,o)}))}},{key:"moveCarsRace",value:function(e,r){for(var n=document.querySelectorAll(".car_image_container"),o=document.querySelectorAll(".car_image"),i=[],a=0;a<o.length;a+=1)if(Number(o[a].getAttribute("id"))===e[a]){var c=n[a].clientWidth,u=c-.14*c,s=o[a].animate([{transform:"translateX(0)"},{transform:"translateX(".concat(u,"px)")}],{duration:r[a]});s.id=o[a].getAttribute("id"),o[a].style.transform="translateX(".concat(u,"px)"),i.push(s)}t.arrayWithAnimations=i,this.addListenerToEachAnimationOfRace(i);for(var l=0;l<o.length;l+=1)this.carsBlockGame.receivePermissionToDriveCar(i[l],e[l])}},{key:"addListenerToEachAnimationOfRace",value:function(e){e.forEach((function(e){return e.addEventListener("finish",t.receiveWinner)}))}},{key:"makeButtonsDisabledWhileRaceInProgress",value:function(){var t=document.querySelector(".button_winners"),e=document.querySelector(".generate_cars_button"),r=document.querySelector(".next_button_cars");document.querySelector(".prev_button_cars").disabled=!0,r.disabled=!0,t.disabled=!0,e.disabled=!0,document.querySelectorAll(".select_button").forEach((function(t){t.disabled=!0})),document.querySelectorAll(".remove_button").forEach((function(t){t.disabled=!0})),document.querySelectorAll(".start_button").forEach((function(t){t.disabled=!0}))}}],o=[{key:"receiveWinner",value:function(e){var r=e.currentTarget;t.winnerId=Number(r.id),t.winnerTime="".concat((Number(r.currentTime)/1e3).toFixed(2),"s"),t.openMakeWinWindow(t.winnerId)}},{key:"makeButtonsEnabledAfterRaceInProgress",value:function(){var t=document.querySelector(".button_winners"),e=document.querySelector(".generate_cars_button"),r=document.querySelector(".next_button_cars");document.querySelector(".prev_button_cars").disabled=!1,r.disabled=!1,t.disabled=!1,e.disabled=!1,document.querySelectorAll(".select_button").forEach((function(t){t.disabled=!1})),document.querySelectorAll(".remove_button").forEach((function(t){t.disabled=!1})),document.querySelectorAll(".start_button").forEach((function(t){t.disabled=!1}))}},{key:"openMakeWinWindow",value:(i=lt(ut().mark((function e(r){var n,o,i,a=this;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.arrayWithAnimations.forEach((function(t){return t.removeEventListener("finish",a.receiveWinner)})),(n=new URL("http://127.0.0.1:3000/garage")).searchParams.set("id","".concat(r)),e.next=5,fetch(n,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Error of receiving data");return t.json()}));case 5:o=e.sent,i=o,setTimeout((function(){a.mainField.makeWinWindow(i,a.winnerTime);var e={wins:1,time:parseFloat(a.winnerTime),id:i[0].id};t.winnerObject=e,a.addListenerToOKWinButton()}),0);case 8:case"end":return e.stop()}}),e)}))),function(t){return i.apply(this,arguments)})},{key:"addListenerToOKWinButton",value:function(){document.querySelector(".window_win_ok").addEventListener("click",t.startToMakeNoteInWinnersTable)}},{key:"startToMakeNoteInWinnersTable",value:function(e){var r=document.querySelector(".window_win"),n=document.querySelector(".reset_button"),o=t.winnerObject;e.stopPropagation(),document.querySelector(".window_win_ok").removeEventListener("click",t.startToMakeNoteInWinnersTable),r.remove(),n.disabled=!1,t.winnerTableGame.getWinnerFromServer(o),t.makeButtonsEnabledAfterRaceInProgress()}}],r&&ft(e.prototype,r),o&&ft(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ht(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===ht(o)?o:String(o)),n)}var o}const mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"addListenerToGarageButton",value:function(){var t=this;document.querySelector(".button_garage").addEventListener("click",(function(e){var r=e.target;t.changePage(r)}))}},{key:"addListenerToWinnersButton",value:function(){var t=this;document.querySelector(".button_winners").addEventListener("click",(function(e){var r=e.target;t.changePage(r)}))}},{key:"changePage",value:function(t){var e=document.querySelector(".winners_container"),r=document.querySelector(".garage_container"),n=document.querySelector(".button_winners"),o=document.querySelector(".button_garage");t.classList.contains("button_garage")&&(e.classList.add("display_none"),r.classList.remove("display_none"),t.disabled=!0,n.disabled=!1),t.classList.contains("button_winners")&&(e.classList.remove("display_none"),r.classList.add("display_none"),t.disabled=!0,o.disabled=!1)}}])&&pt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==vt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===vt(o)?o:String(o)),n)}var o}const bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.winnersTableGame=new H}var e,r;return e=t,(r=[{key:"addListenerToNextButtonWinner",value:function(){var t=this,e=document.querySelector(".next_button_winners");e.addEventListener("click",(function(r){r.preventDefault(),H.pageNumber+=1,document.querySelector(".winners_table_container").innerHTML="",t.winnersTableGame.receiveAllWinnersFromServer("id","ASC"),document.querySelector(".page_number_winners").innerHTML="Page #".concat(H.pageNumber);var n=document.querySelector(".prev_button_winners");H.pageNumber>1&&(n.disabled=!1),setTimeout((function(){10*H.pageNumber>=H.numberOfWinners&&(e.disabled=!0)}),100)}))}},{key:"addListenerToPreviousButtonWinner",value:function(){var t=this,e=document.querySelector(".prev_button_winners");e.addEventListener("click",(function(){H.pageNumber-=1,document.querySelector(".winners_table_container").innerHTML="",t.winnersTableGame.receiveAllWinnersFromServer("id","ASC"),document.querySelector(".page_number_winners").innerHTML="Page #".concat(H.pageNumber);var r=document.querySelector(".next_button_winners");1===H.pageNumber&&(e.disabled=!0),setTimeout((function(){(10*H.pageNumber<H.numberOfWinners||1===H.pageNumber)&&(r.disabled=!1)}),100)}))}}])&&yt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==gt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===gt(o)?o:String(o)),n)}var o}var Lt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainField=new n,this.buttonsBetweenPages=new u,this.commonContainerGaragePage=new B,this.commonContainerWinnersPage=new A,this.carsBlockToFill=new w,this.createAndChangecarGame=new rt,this.carsBlockGame=new K,this.commonContainerCarsGame=new it,this.gameControlGame=new dt,this.winnerTableGame=new H,this.buttonsBetweenPagesGame=new mt,this.commonContainerWinnersGame=new bt}var e,r;return e=t,(r=[{key:"startGame",value:function(){this.mainField.makeMainHtmlField(),this.buttonsBetweenPages.makeButtonsBetweenPages(),this.mainField.main.append(this.buttonsBetweenPages.buttonsContainer),this.commonContainerGaragePage.makeCommonContainerGarage(),this.mainField.main.append(this.commonContainerGaragePage.commonContainerGarage),this.commonContainerWinnersPage.makeCommonContainerGarage(),this.mainField.main.append(this.commonContainerWinnersPage.commonContainerWinners),this.carsBlockToFill.receiveCarsFromServer(),this.winnerTableGame.receiveAllWinnersFromServer("id","ASC")}},{key:"makeGame",value:function(){var t=this;setTimeout((function(){t.carsBlockGame.addListenerToSelectButton(),t.carsBlockGame.addListenerToRemoveButton(),t.carsBlockGame.addListenerToStartButton(),t.carsBlockGame.addListenerToStopButton()}),2e3),this.createAndChangecarGame.addListenerToCreateButton(),this.createAndChangecarGame.addListenerToUpdateButton(),this.createAndChangecarGame.addListenerToCreateInputName(),this.commonContainerCarsGame.addListenerToNextButton(),this.commonContainerCarsGame.addListenerToPreviousButton(),this.commonContainerWinnersGame.addListenerToNextButtonWinner(),this.commonContainerWinnersGame.addListenerToPreviousButtonWinner(),this.gameControlGame.addListenerToGenerateButton(),this.gameControlGame.addListenerToRaceButton(),this.gameControlGame.addListenerToResetButton(),this.buttonsBetweenPagesGame.addListenerToGarageButton(),this.buttonsBetweenPagesGame.addListenerToWinnersButton(),this.winnerTableGame.addListenerToWinTableButtonSortByWinsNumber(),this.winnerTableGame.addListenerToWinTableButtonSortByTime()}}])&&wt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());Lt.startGame(),Lt.makeGame()})();